<section class="backlink-header mob-check">
    <div class="container">
        <div class="row">
            <div class="col-sm-12 col-md-12 col-lg-12 show-deskk">
                <div [className]="sidebartoggle1 ?  'hidesidebar toggle-sidebar hidden-lg' : 'showsidebar toggle-sidebar hidden-lg'">
                    <div class="cart-sidebar sidebar-collapse">
                        <div class="sidebar-head">
                            <h2>
                                <a (click)="toggleShow()"> <span class="arrow-down">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="11.2" height="6.6"
                                            viewBox="0 0 11.2 6.6">
                                            <path id="Path_2040" data-name="Path 2040"
                                                d="M541.8,7l-3.9,3.9L534,7a.967.967,0,0,0-1.4,0,.967.967,0,0,0,0,1.4l4.6,4.6a.967.967,0,0,0,1.4,0l4.6-4.6A.99.99,0,1,0,541.8,7Z"
                                                transform="translate(-532.3 -6.7)" fill="#1cb1c5" />
                                        </svg>
                                    </span><span class="down-ext">Hide Order Summary</span><span class="left-ext">Show Order Summary</span></a>
                            </h2>
                            <span class="amount-summary"> $40.00 </span>
                        </div>
                    </div>
                </div>
                <div *ngIf="sidebartoggle1" class="sidebar-ui">
                    <ngb-accordion activeIds="enter-payment">
                        <ngb-panel id="refered-sidebar">
                            <ng-template ngbPanelTitle>
                                <div class="heading-step1">
                                    <h4>Referred By</h4>
                                    <span *ngIf="!toShowData" class="vali-promo">Not Referred</span>
                                    <p *ngIf="toShowData" class="Refered-value mb-0">{{refName}}, ID #{{refId}}</p>
                                    <span class="arrow-stepp">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="6.6" height="11.2"
                                            viewBox="0 0 6.6 11.2">
                                            <path id="Path_2044" data-name="Path 2044"
                                                d="M630.9,4.7a.967.967,0,0,0,0,1.4l3.9,3.9-3.9,3.9a.99.99,0,0,0,1.4,1.4l4.6-4.6a.967.967,0,0,0,0-1.4l-4.6-4.6A.967.967,0,0,0,630.9,4.7Z"
                                                transform="translate(-630.6 -4.4)" />
                                        </svg>
                                    </span>
                                </div>
                            </ng-template>
                            <ng-template ngbPanelContent>
                                <div class=" search-box">
                                    <div class="search-bar-on">
                                        <div class="form-group">
                                            <input type="text" class="form-control" (click)="open(referr_user)" value="" placeholder="Find referral (Optional)" />
                                            <span class="search"><svg xmlns="http://www.w3.org/2000/svg" width="16.947"
                                                    height="17.048" viewBox="0 0 16.947 17.048">
                                                    <path id="Path_2019" data-name="Path 2019"
                                                        d="M151.4,12a4.5,4.5,0,1,1,4.5-4.5A4.481,4.481,0,0,1,151.4,12Zm6,0h-.8l-.3-.3a6.593,6.593,0,0,0,1.5-5.3,6.471,6.471,0,0,0-5.6-5.3,6.53,6.53,0,0,0-2,12.9,6.593,6.593,0,0,0,5.3-1.5l.3.3v.8l4.2,4.2a1.061,1.061,0,0,0,1.5-1.5Z"
                                                        transform="translate(-144.853 -1.052)" />
                                                </svg>
                                            </span>
                                        </div>
                                        <span class="text-value">Customer ID, First or Last Name</span>
                                    </div>
                                </div>
                            </ng-template>
                        </ngb-panel>
                        <ngb-panel id="promo-sidebar">
                            <ng-template ngbPanelTitle>
                                <div class="heading-step1">
                                    <h4>Promo Code</h4>
                                    <span class="vali-promo">Not Applied</span>
                                    <span class="arrow-stepp">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="6.6" height="11.2"
                                            viewBox="0 0 6.6 11.2">
                                            <path id="Path_2044" data-name="Path 2044"
                                                d="M630.9,4.7a.967.967,0,0,0,0,1.4l3.9,3.9-3.9,3.9a.99.99,0,0,0,1.4,1.4l4.6-4.6a.967.967,0,0,0,0-1.4l-4.6-4.6A.967.967,0,0,0,630.9,4.7Z"
                                                transform="translate(-630.6 -4.4)" />
                                        </svg>
                                    </span>
                                </div>
                            </ng-template>
                            <ng-template ngbPanelContent>
                                            <div class="content-card steps-inner shipping-address-form">
                                                <div class="col-md-12 loyalty-form p-0 mb-3">
                                                    <div [className]="promocode_onetime ?  'special-field datafilled form-group ' : 'special-field dataempty form-group'">
                                                        <input type="text" [(ngModel)]="promocode_onetime" class="form-control" name="promo-enter" (focusout)="clearPromo($event)" [ngModelOptions]="{standalone: true}"/>
                                                        <label class="form-label">Promo Code</label>
                                                        <span class="vali-promo">{{promocodeMessage}}</span>
                                                        <span class="btn-add-promo" (click)="addPromo()" *ngIf="addPromoIcon" >
                
                                                        <svg xmlns="http://www.w3.org/2000/svg" width="14"
                                                            height="14" viewBox="0 0 14 14">
                                                            <path _ngcontent-shj-c146="" id="Path_2014"
                                                                data-name="Path 2014"
                                                                d="M207.9,11h-5v5a1,1,0,0,1-2,0V11h-5a1,1,0,0,1,0-2h5V4a1,1,0,0,1,2,0V9h5a1,1,0,0,1,0,2Z"
                                                                transform="translate(-194.9 -3)"></path>
                                                        </svg>
                                                    </span>
                                                    <span class="btn-add-promo" *ngIf="!addPromoIcon">
                
                                                        <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24" height="24" viewBox="0 0 24 24">
                                                            <defs>
                                                            <clipPath id="clip-path">
                                                            <rect width="24" height="24" fill="none"/>
                                                            </clipPath>
                                                            </defs>
                                                            <g id="Icon_Done_Rounded" data-name="Icon / Done / Rounded" opacity="0.5" clip-path="url(#clip-path)">
                                                            <rect id="Box" width="24" height="24" fill="none"/>
                                                            <path id="Path_2036" data-name="Path 2036" d="M822.7,13.9l-3.5-3.5a.967.967,0,0,0-1.4,0,.967.967,0,0,0,0,1.4L822,16a.967.967,0,0,0,1.4,0L834,5.4A.967.967,0,0,0,834,4a.967.967,0,0,0-1.4,0Z" transform="translate(-814 2)"/>
                                                            </g>
                                                            </svg>
                                                    </span>
                                                    </div>
                                                </div>
                                            </div>
                            </ng-template>
                        </ngb-panel>

                        <ngb-panel id="otp-sidebar">
                            <ng-template ngbPanelTitle>
                                <div class="heading-step1">
                                    <h4>One-Time Purchase</h4>
                                    <span class="arrow-stepp">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="6.6" height="11.2"
                                            viewBox="0 0 6.6 11.2">
                                            <path id="Path_2044" data-name="Path 2044"
                                                d="M630.9,4.7a.967.967,0,0,0,0,1.4l3.9,3.9-3.9,3.9a.99.99,0,0,0,1.4,1.4l4.6-4.6a.967.967,0,0,0,0-1.4l-4.6-4.6A.967.967,0,0,0,630.9,4.7Z"
                                                transform="translate(-630.6 -4.4)" />
                                        </svg>
                                    </span>
                                </div>
                            </ng-template>
                            <ng-template ngbPanelContent>
                                <div class="content-card steps-inner otp-data-sidebar">
                                    <table>
                                        <tbody>
                                            <tr *ngFor="let item of oneTimePriceCartItems">
                                                <td>{{item.itemDescription}}</td>
                                                <td>${{item.Price * item.quantityModel | number :'.1-2'}}</td>
                                            </tr>
                                        </tbody>
                                        <tfoot>
                                            <tr *ngIf="isPromocode">
                                                <td>You Saved</td>
                                                <td>-${{promoPercentage | number :'.1-2'}}</td>
                                            </tr>
                                            <tr>
                                                <td>Subtotal</td>
                                                <td>${{subtotalOneTimePrice| number :'.1-2'}}</td>
                                            </tr>
                                        </tfoot>
                                    </table>
                                </div>
                            </ng-template>
                        </ngb-panel>

                        <ngb-panel id="subsc-purchse">
                            <ng-template ngbPanelTitle>
                                <div class="heading-step1">
                                    <h4>Subscription Purchase</h4>

                                    <span class="arrow-stepp">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="6.6" height="11.2"
                                            viewBox="0 0 6.6 11.2">
                                            <path id="Path_2044" data-name="Path 2044"
                                                d="M630.9,4.7a.967.967,0,0,0,0,1.4l3.9,3.9-3.9,3.9a.99.99,0,0,0,1.4,1.4l4.6-4.6a.967.967,0,0,0,0-1.4l-4.6-4.6A.967.967,0,0,0,630.9,4.7Z"
                                                transform="translate(-630.6 -4.4)" />
                                        </svg>
                                    </span>
                                </div>
                            </ng-template>
                            <ng-template ngbPanelContent>
                                <div class="content-card steps-inner subsc-purchse-sidebar">
                                    <table>
                                        <tbody>
                                            <tr *ngFor="let item of subscriptionCartItems">
                                                <td>{{item.itemDescription}}</td>
                                                <td>${{item.Price * item.quantityModel | number :'.1-2'}}</td>
                                            </tr>
                                        </tbody>
                                        <tfoot>
                                            <tr>
                                                <td>You Saved</td>
                                                <td>-${{discount15Percent | number:'.1-2'}}</td>
                                            </tr>
                                            <tr>
                                                <td>Subtotal</td>
                                                <td>${{subTotalSubscriptionPriceAfterDiscount | number :'.1-2'}}
                                                </td>
                                            </tr>
                                        </tfoot>
                                    </table>
                                </div>
                            </ng-template>
                        </ngb-panel>

                        <ngb-panel id="today-order-sidebar">
                            <ng-template ngbPanelTitle>
                                <div class="heading-step1">
                                    <h4>Today's Order</h4>
                                    <span class="arrow-stepp">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="6.6" height="11.2"
                                            viewBox="0 0 6.6 11.2">
                                            <path id="Path_2044" data-name="Path 2044"
                                                d="M630.9,4.7a.967.967,0,0,0,0,1.4l3.9,3.9-3.9,3.9a.99.99,0,0,0,1.4,1.4l4.6-4.6a.967.967,0,0,0,0-1.4l-4.6-4.6A.967.967,0,0,0,630.9,4.7Z"
                                                transform="translate(-630.6 -4.4)" />
                                        </svg>
                                    </span>
                                </div>
                            </ng-template>
                            <ng-template ngbPanelContent>
                                <div class="content-card steps-inner today-order">
                                    <table>
                                        <tbody>
                                            <tr>
                                                <td>One-Time Purchase</td>
                                                <td>${{subtotalOneTimePrice | number :'.1-2'}}
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>Subscription Purchase</td>
                                                <td>${{subTotalSubscriptionPriceAfterDiscount | number :'.1-2'}}</td>
                                            </tr>
                                        </tbody>
                                        <tfoot>
                                            <tr>
                                                <td>You Saved</td>
                                                <td>-${{totalDiscount | number:'.1-2'}}</td>
                                            </tr>
                                            <tr>
                                                <td>Total</td>
                                                <td>${{cartSummaryTotal | number:'.1-2'}}</td>
                                            </tr>
                                        </tfoot>
                                    </table>
                                </div>
                            </ng-template>
                        </ngb-panel>
                    </ngb-accordion>
                </div>

            </div>


            <div class="col-lg-7 col-md-12 back-link mb-4">
                <a [routerLink]="['/store/cart']"><svg aria-hidden="true" focusable="false" data-prefix="far"
                        data-icon="angle-left" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 192 512"
                        class="svg-inline--fa fa-angle-left fa-w-6 fa-3x">
                        <path fill="currentColor"
                            d="M4.2 247.5L151 99.5c4.7-4.7 12.3-4.7 17 0l19.8 19.8c4.7 4.7 4.7 12.3 0 17L69.3 256l118.5 119.7c4.7 4.7 4.7 12.3 0 17L168 412.5c-4.7 4.7-12.3 4.7-17 0L4.2 264.5c-4.7-4.7-4.7-12.3 0-17z"
                            class=""></path>
                    </svg>Back to CART</a>
            </div>
            <div class="visible-lg col-lg-5">
                <div class="sidebar-checkout">
                    <div class="cart-sidebar">
                        <div class="sidebar-head">
                            <h2>Cart Summary</h2><span class="amount-summary"> ${{cartSummaryTotal |
                                number:'.1-2'}}</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<section class="checkout-page grid-checkout">
    <div class="container">
        <div class="row">
            <div class="col-sm-12 col-md-12 col-lg-5 col-lg-push-7 desk-sidebar">
                <div class="showsidebar toggle-sidebar hidden-lg">
                    <div class="cart-sidebar sidebar-collapse">
                        <div class="sidebar-head">
                            <h2 class="title"> <span class="arrow-down">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="11.2" height="6.6"
                                            viewBox="0 0 11.2 6.6">
                                            <path id="Path_2040" data-name="Path 2040"
                                                d="M541.8,7l-3.9,3.9L534,7a.967.967,0,0,0-1.4,0,.967.967,0,0,0,0,1.4l4.6,4.6a.967.967,0,0,0,1.4,0l4.6-4.6A.99.99,0,1,0,541.8,7Z"
                                                transform="translate(-532.3 -6.7)" fill="#1cb1c5" />
                                        </svg>
                                    </span>Cart Summary
                            </h2>
                            <span class="amount-summary"> $40.00 </span>
                        </div>
                    </div>
                </div>
                <div *ngIf="sidebartoggle" class="sidebar-ui">
                    <ngb-accordion activeIds="enter-payment">
                        <ngb-panel id="refered-sidebar">
                            <ng-template ngbPanelTitle>
                                <div class="heading-step1">
                                    <h4>Referred By</h4>
                                    <span *ngIf="!toShowData" class="vali-promo">Not Referred</span>
                                    <p *ngIf="toShowData" class="Refered-value mb-0">{{refName}}, ID #{{refId}}</p>
                                    <span class="arrow-stepp">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="6.6" height="11.2"
                                            viewBox="0 0 6.6 11.2">
                                            <path id="Path_2044" data-name="Path 2044"
                                                d="M630.9,4.7a.967.967,0,0,0,0,1.4l3.9,3.9-3.9,3.9a.99.99,0,0,0,1.4,1.4l4.6-4.6a.967.967,0,0,0,0-1.4l-4.6-4.6A.967.967,0,0,0,630.9,4.7Z"
                                                transform="translate(-630.6 -4.4)" />
                                        </svg>
                                    </span>
                                </div>
                            </ng-template>
                            <ng-template ngbPanelContent>
                                <div class=" search-box">
                                    <div class="search-bar-on">
                                        <div class="form-group">
                                            <input type="text" class="form-control" (click)="open(referr_user)" value="" placeholder="Find referral (Optional)" />
                                            <span class="search"><svg xmlns="http://www.w3.org/2000/svg" width="16.947"
                                                    height="17.048" viewBox="0 0 16.947 17.048">
                                                    <path id="Path_2019" data-name="Path 2019"
                                                        d="M151.4,12a4.5,4.5,0,1,1,4.5-4.5A4.481,4.481,0,0,1,151.4,12Zm6,0h-.8l-.3-.3a6.593,6.593,0,0,0,1.5-5.3,6.471,6.471,0,0,0-5.6-5.3,6.53,6.53,0,0,0-2,12.9,6.593,6.593,0,0,0,5.3-1.5l.3.3v.8l4.2,4.2a1.061,1.061,0,0,0,1.5-1.5Z"
                                                        transform="translate(-144.853 -1.052)" />
                                                </svg>
                                            </span>
                                        </div>
                                        <span class="text-value">Customer ID, First or Last Name</span>
                                    </div>
                                </div>
                            </ng-template>
                        </ngb-panel>
                        <ngb-panel id="promo-sidebar">
                            <ng-template ngbPanelTitle>
                                <div class="heading-step1">
                                    <h4>Promo Code</h4>
                                    <span class="vali-promo"><strong>{{promocode_onetime}} {{promocodeMessage}}</strong></span>
                                    <span class="arrow-stepp">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="6.6" height="11.2"
                                            viewBox="0 0 6.6 11.2">
                                            <path id="Path_2044" data-name="Path 2044"
                                                d="M630.9,4.7a.967.967,0,0,0,0,1.4l3.9,3.9-3.9,3.9a.99.99,0,0,0,1.4,1.4l4.6-4.6a.967.967,0,0,0,0-1.4l-4.6-4.6A.967.967,0,0,0,630.9,4.7Z"
                                                transform="translate(-630.6 -4.4)" />
                                        </svg>
                                    </span>
                                </div>
                            </ng-template>
                            <ng-template ngbPanelContent>

                                <div class="content-card steps-inner shipping-address-form">
                                            <div class="col-md-12 loyalty-form p-0 mb-3">
                                                <div [className]="promocode_onetime ?  'special-field datafilled form-group' : 'special-field dataempty form-group'">
                                                    <input type="text" [(ngModel)]="promocode_onetime" class="form-control" name="promo-enter" (focusout)="clearPromo($event)" [ngModelOptions]="{standalone: true}"/>
                                                    <label class="form-label">Promo Code</label>
                                                    <span class="vali-promo" >{{promocodeMessage}}</span>
                                                    <span class="btn-add-promo" (click)="addPromo()" *ngIf="addPromoIcon" >
                
                                                        <svg xmlns="http://www.w3.org/2000/svg" width="14"
                                                            height="14" viewBox="0 0 14 14">
                                                            <path _ngcontent-shj-c146="" id="Path_2014"
                                                                data-name="Path 2014"
                                                                d="M207.9,11h-5v5a1,1,0,0,1-2,0V11h-5a1,1,0,0,1,0-2h5V4a1,1,0,0,1,2,0V9h5a1,1,0,0,1,0,2Z"
                                                                transform="translate(-194.9 -3)"></path>
                                                        </svg>
                                                    </span>
                                                    <span class="btn-add-promo" *ngIf="!addPromoIcon">
                
                                                        <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24" height="24" viewBox="0 0 24 24">
                                                            <defs>
                                                            <clipPath id="clip-path">
                                                            <rect width="24" height="24" fill="none"/>
                                                            </clipPath>
                                                            </defs>
                                                            <g id="Icon_Done_Rounded" data-name="Icon / Done / Rounded" opacity="0.5" clip-path="url(#clip-path)">
                                                            <rect id="Box" width="24" height="24" fill="none"/>
                                                            <path id="Path_2036" data-name="Path 2036" d="M822.7,13.9l-3.5-3.5a.967.967,0,0,0-1.4,0,.967.967,0,0,0,0,1.4L822,16a.967.967,0,0,0,1.4,0L834,5.4A.967.967,0,0,0,834,4a.967.967,0,0,0-1.4,0Z" transform="translate(-814 2)"/>
                                                            </g>
                                                            </svg>
                                                    </span>
                                                </div>
                                            </div>
                                </div>
                             </ng-template>
                        </ngb-panel>

                        <ngb-panel id="otp-sidebar">
                            <ng-template ngbPanelTitle>
                                <div class="heading-step1">
                                    <h4>One-Time Purchase</h4>
                                    <span class="arrow-stepp">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="6.6" height="11.2"
                                            viewBox="0 0 6.6 11.2">
                                            <path id="Path_2044" data-name="Path 2044"
                                                d="M630.9,4.7a.967.967,0,0,0,0,1.4l3.9,3.9-3.9,3.9a.99.99,0,0,0,1.4,1.4l4.6-4.6a.967.967,0,0,0,0-1.4l-4.6-4.6A.967.967,0,0,0,630.9,4.7Z"
                                                transform="translate(-630.6 -4.4)" />
                                        </svg>
                                    </span>
                                </div>
                            </ng-template>
                            <ng-template ngbPanelContent>
                                <div class="content-card steps-inner otp-data-sidebar">
                                    <table>
                                        <tbody>
                                            <tr *ngFor="let item of oneTimePriceCartItems">
                                                <td>{{item.itemDescription}}</td>
                                                <td>${{item.Price * item.quantityModel | number :'.1-2'}}</td>
                                            </tr>
                                        </tbody>
                                        <tfoot>
                                            <tr *ngIf="isPromocode">
                                                <td>You Saved</td>
                                                <td>-${{promoPercentage | number :'.1-2'}}</td>
                                            </tr>
                                            <tr>
                                                <td>Subtotal</td>
                                                <td>${{subtotalOneTimePrice| number :'.1-2'}}</td>
                                            </tr>
                                        </tfoot>
                                    </table>
                                </div>
                            </ng-template>
                        </ngb-panel>

                        <ngb-panel id="subsc-purchse">
                            <ng-template ngbPanelTitle>
                                <div class="heading-step1">
                                    <h4>Subscription Purchase</h4>

                                    <span class="arrow-stepp">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="6.6" height="11.2"
                                            viewBox="0 0 6.6 11.2">
                                            <path id="Path_2044" data-name="Path 2044"
                                                d="M630.9,4.7a.967.967,0,0,0,0,1.4l3.9,3.9-3.9,3.9a.99.99,0,0,0,1.4,1.4l4.6-4.6a.967.967,0,0,0,0-1.4l-4.6-4.6A.967.967,0,0,0,630.9,4.7Z"
                                                transform="translate(-630.6 -4.4)" />
                                        </svg>
                                    </span>
                                </div>
                            </ng-template>
                            <ng-template ngbPanelContent>
                                <div class="content-card steps-inner subsc-purchse-sidebar">
                                    <table>
                                        <tbody>
                                            <tr *ngFor="let item of subscriptionCartItems">
                                                <td>{{item.itemDescription}}</td>
                                                <td>${{item.Price * item.quantityModel | number :'.1-2'}}</td>
                                            </tr>
                                        </tbody>
                                        <tfoot>
                                            <tr>
                                                <td>You Saved</td>
                                                <td>-${{discount15Percent | number:'.1-2'}}</td>
                                            </tr>
                                            <tr>
                                                <td>Subtotal</td>
                                                <td>${{subTotalSubscriptionPriceAfterDiscount | number :'.1-2'}}
                                                </td>
                                            </tr>
                                        </tfoot>
                                    </table>
                                </div>
                            </ng-template>
                        </ngb-panel>

                        <ngb-panel id="today-order-sidebar">
                            <ng-template ngbPanelTitle>
                                <div class="heading-step1">
                                    <h4>Today's Order</h4>
                                    <span class="arrow-stepp">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="6.6" height="11.2"
                                            viewBox="0 0 6.6 11.2">
                                            <path id="Path_2044" data-name="Path 2044"
                                                d="M630.9,4.7a.967.967,0,0,0,0,1.4l3.9,3.9-3.9,3.9a.99.99,0,0,0,1.4,1.4l4.6-4.6a.967.967,0,0,0,0-1.4l-4.6-4.6A.967.967,0,0,0,630.9,4.7Z"
                                                transform="translate(-630.6 -4.4)" />
                                        </svg>
                                    </span>
                                </div>
                            </ng-template>
                            <ng-template ngbPanelContent>
                                <div class="content-card steps-inner today-order">
                                    <table>
                                        <tbody>
                                            <tr>
                                                <td>One-Time Purchase</td>
                                                <td>${{subtotalOneTimePrice | number :'.1-2'}}
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>Subscription Purchase</td>
                                                <td>${{subTotalSubscriptionPriceAfterDiscount | number :'.1-2'}}</td>
                                            </tr>
                                        </tbody>
                                        <tfoot>
                                            <tr>
                                                <td>You Saved</td>
                                                <td>-${{totalDiscount | number:'.1-2'}}</td>
                                            </tr>
                                            <tr>
                                                <td>Total</td>
                                                <td>${{cartSummaryTotal | number:'.1-2'}}</td>
                                            </tr>
                                        </tfoot>
                                    </table>
                                </div>
                            </ng-template>
                        </ngb-panel>
                    </ngb-accordion>
                </div>

            </div>
            <!-- Enter Shipping Starts -->

            <div class="col-sm-12 col-md-12 col-lg-7 col-lg-pull-5">
                <div class="checkout-steps-3">
                    <ngb-accordion [closeOthers]="false" [activeIds]="activeIds" class="panel-stepbar">
                        <ngb-panel [disabled]="showPanel1 ? true:null" id="checkoutstep1">
                            <ng-template ngbPanelTitle>
                                <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24" height="24" viewBox="0 0 24 24">
                                    <defs>
                                        <clipPath id="clip-path">
                                            <rect width="24" height="24" fill="none" />
                                        </clipPath>
                                    </defs>
                                    <g id="Icon_Check_Circle_Rounded" data-name="Icon / Check Circle / Rounded"
                                        clip-path="url(#clip-path)">
                                        <rect id="Box" width="24" height="24" fill="none" />
                                        <path id="Path_2034" data-name="Path 2034"
                                            d="M247.2,14.3l-3.6-3.6a.967.967,0,0,1,0-1.4.967.967,0,0,1,1.4,0l2.9,2.9,6.9-6.9a.99.99,0,0,1,1.4,1.4l-7.6,7.6A.967.967,0,0,1,247.2,14.3ZM249.9,0a10,10,0,1,0,10,10A10.029,10.029,0,0,0,249.9,0Z"
                                            transform="translate(-238 2)" fill="#1cc584" />
                                    </g>
                                </svg>
                                <span>1 of 3 - Enter Shipping</span>
                            </ng-template>

                            <ng-template ngbPanelContent>
                                <form [formGroup]="shippingAddressForm" (ngSubmit)="onAddressSubmit()">
                                    <ngb-accordion activeIds="subscr-schedule,shipping-address,shipping-method">
                                        <ngb-panel *ngIf="subscriptionCartItems.length > 0" id="subscr-schedule">
                                            <ng-template ngbPanelTitle>
                                                <div class="heading-step1">
                                                    <h4>Subscription Schedule</h4>
                                                    <p>Start Date:<span class="data-span">{{startDate | date:
                                                        'dd/MM/yyyy'}}</span></p>
                                                    <span class="arrow-stepp">
                                                    <svg xmlns="http://www.w3.org/2000/svg" width="6.6" height="11.2"
                                                        viewBox="0 0 6.6 11.2">
                                                        <path id="Path_2044" data-name="Path 2044"
                                                            d="M630.9,4.7a.967.967,0,0,0,0,1.4l3.9,3.9-3.9,3.9a.99.99,0,0,0,1.4,1.4l4.6-4.6a.967.967,0,0,0,0-1.4l-4.6-4.6A.967.967,0,0,0,630.9,4.7Z"
                                                            transform="translate(-630.6 -4.4)" />
                                                    </svg>
                                                </span>
                                                </div>
                                            </ng-template>
                                            <ng-template ngbPanelContent>
                                                <div class="content-card steps-inner">
                                                    <div [className]="startDate ?  'special-field datafilled form-group ' : 'special-field dataempty form-group'" id="subscr-schedule">
                                                        <input type="text" class="form-control" bsDatepicker [minDate]="minDate" [bsConfig]="{ isAnimated: true, adaptivePosition: true, selectFromOtherMonth: true  }" [ngModelOptions]="{standalone: true}" [(ngModel)]="startDate" />
                                                        <label class="form-label">Select Start Date</label>
                                                        <span class="btn-add-promo">
                                                        <svg xmlns="http://www.w3.org/2000/svg"
                                                            xmlns:xlink="http://www.w3.org/1999/xlink" width="24"
                                                            height="24" viewBox="0 0 24 24">
                                                            <defs>
                                                                <clipPath id="clip-path">
                                                                    <rect width="24" height="24" fill="none" />
                                                                </clipPath>
                                                            </defs>
                                                            <g id="Icon_Event_Rounded"
                                                                data-name="Icon / Event / Rounded" opacity="0.5"
                                                                clip-path="url(#clip-path)">
                                                                <rect id="Box" width="24" height="24" fill="none" />
                                                                <path id="Path_2017" data-name="Path 2017"
                                                                    d="M879.9,18h-12a1.075,1.075,0,0,1-1-1V7h14V17A1,1,0,0,1,879.9,18Zm-2-17V2h-8V1a1,1,0,0,0-2,0V2h-1a2.006,2.006,0,0,0-2,2V18a2.006,2.006,0,0,0,2,2h14a2.006,2.006,0,0,0,2-2V4a2.006,2.006,0,0,0-2-2h-1V1a1,1,0,0,0-2,0Zm0,10h-3a1.075,1.075,0,0,0-1,1v3a1.075,1.075,0,0,0,1,1h3a1.075,1.075,0,0,0,1-1V12A1,1,0,0,0,877.9,11Z"
                                                                    transform="translate(-862 2)" />
                                                            </g>
                                                        </svg>
                                                    </span>
                                                    </div>
                                                </div>
                                            </ng-template>
                                        </ngb-panel>

                                        <ngb-panel id="shipping-address">
                                            <ng-template ngbPanelTitle>
                                                <div class="heading-step1">
                                                    <h4>Shipping Address</h4>
                                                    <p> {{displayAddress}}</p>
                                                    <span class="arrow-stepp">
                                                        <svg xmlns="http://www.w3.org/2000/svg" width="6.6"
                                                            height="11.2" viewBox="0 0 6.6 11.2">
                                                            <path id="Path_2044" data-name="Path 2044"
                                                                d="M630.9,4.7a.967.967,0,0,0,0,1.4l3.9,3.9-3.9,3.9a.99.99,0,0,0,1.4,1.4l4.6-4.6a.967.967,0,0,0,0-1.4l-4.6-4.6A.967.967,0,0,0,630.9,4.7Z"
                                                                transform="translate(-630.6 -4.4)" />
                                                        </svg>
                                                    </span>
                                                </div>
                                            </ng-template>
                                            <ng-template ngbPanelContent>
                                                <div class="content-card steps-inner shipping-address-form">
                                                    <div class="row">
                                                        <div class="col-md-12">
                                                            <div class="form-group">
                                                                <input type="text" class="form-control" placeholder="First Name" formControlName="firstName" [ngClass]="{ 'is-invalid': submitted && f.firstName?.errors }" />
                                                                <div *ngIf="submitted && f.firstName?.errors" class="invalid-feedback">
                                                                    <div *ngIf="f.firstName?.errors.required">
                                                                        First Name is required</div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-md-12">
                                                            <div class="form-group">
                                                                <input type="text" class="form-control" placeholder="Last Name" formControlName="lastName" [ngClass]="{ 'is-invalid': submitted && f.lastName?.errors }" />
                                                                <div *ngIf="submitted && f.lastName?.errors" class="invalid-feedback">
                                                                    <div *ngIf="f.lastName?.errors.required">
                                                                        Last Name is required</div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-md-12">
                                                            <div class="form-group">
                                                                <input type="text" class="form-control" formControlName="streetAddress" placeholder="Street Address" [ngClass]="{ 'is-invalid': submitted && f.streetAddress?.errors }" />
                                                                <div *ngIf="submitted && f.streetAddress?.errors" class="invalid-feedback">
                                                                    <div *ngIf="f.streetAddress?.errors.required">
                                                                        Street Address is required</div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-md-6">
                                                            <div class="form-group">
                                                                <input type="text" class="form-control" placeholder="City" formControlName="city" [ngClass]="{ 'is-invalid': submitted && f.city?.errors }" />
                                                                <div *ngIf="submitted && f.city?.errors" class="invalid-feedback">
                                                                    <div *ngIf="f.city?.errors.required">
                                                                        City is required</div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-md-6">
                                                            <div class="form-group">
                                                                <input type="text" class="form-control" placeholder="State" formControlName="state" [ngClass]="{ 'is-invalid': submitted && f.state?.errors }" />
                                                                <div *ngIf="submitted && f.state?.errors" class="invalid-feedback">
                                                                    <div *ngIf="f.state?.errors.required">
                                                                        State is required</div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-md-12">
                                                            <div class="form-group">
                                                                <input type="number" class="form-control" placeholder="Zip" formControlName="zip" [ngClass]="{ 'is-invalid': submitted && f.zip?.errors }" />
                                                                <div *ngIf="submitted && f.zip?.errors" class="invalid-feedback">
                                                                    <div *ngIf="f.zip?.errors.required">
                                                                        Zip is required</div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-md-12">
                                                            <div class="form-group">
                                                                <input type="text" class="form-control" placeholder="Country" value="US" readonly >
                                                                <div *ngIf="submitted && f.country?.errors" class="invalid-feedback">
                                                                    <div *ngIf="f.country?.errors.required" >
                                                                        Country is required</div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </ng-template>
                                        </ngb-panel>

                                        <ngb-panel id="shipping-method">
                                            <ng-template ngbPanelTitle>
                                                <div class="heading-step1">
                                                    <h4>Shipping Method</h4>
                                                    <p>$6.99 - USPS Ground Shipping - 1st Class</p>
                                                    <span class="arrow-stepp">
                                                    <svg xmlns="http://www.w3.org/2000/svg" width="6.6" height="11.2"
                                                        viewBox="0 0 6.6 11.2">
                                                        <path id="Path_2044" data-name="Path 2044"
                                                            d="M630.9,4.7a.967.967,0,0,0,0,1.4l3.9,3.9-3.9,3.9a.99.99,0,0,0,1.4,1.4l4.6-4.6a.967.967,0,0,0,0-1.4l-4.6-4.6A.967.967,0,0,0,630.9,4.7Z"
                                                            transform="translate(-630.6 -4.4)" />
                                                    </svg>
                                                </span>
                                                </div>
                                            </ng-template>
                                            <ng-template ngbPanelContent>
                                                <div class="content-card steps-inner shipping-method">
                                                    <div class="method-shipp">
                                                        <ul>
                                                            <li >
                                                                <div class="custom-control custom-radio">
                                                                    <input type="radio" id="customRadio1"  [(ngModel)]="isShipmentMethod"  [checked]="isShipmentMethod === 1"  value="1" name="isShipmentMethod" (change)="onItemChange(1)" class="custom-control-input" >
                                                                    <label class="custom-control-label" for="customRadio1">
                                                                    <div class="shipping-list-item">
                                                                        <h4>Get it today (Utah only)</h4>
                                                                        <p>$0.00 Will Call Pickup</p>
                                                                    </div>
                                                                </label>
                                                                </div>
                                                            </li>
                                                            <li>
                                                                <div class="custom-control custom-radio">
                                                                    <input type="radio" id="customRadio2" [checked]="isShipmentMethod === 2"  [(ngModel)]="isShipmentMethod" value="2" (change)="onItemChange(2)" name="isShipmentMethod" class="custom-control-input">
                                                                    <label class="custom-control-label" for="customRadio2">
                                                                    <div class="shipping-list-item">
                                                                        <h4>Get it by Fri, Feb 22nd</h4>
                                                                        <p>FREE Shipping</p>
                                                                    </div>
                                                                </label>
                                                                </div>
                                                            </li>
                                                            <li>
                                                                <div class="custom-control custom-radio">
                                                                    <input type="radio" id="customRadio3" [checked]="isShipmentMethod === 3"  [(ngModel)]="isShipmentMethod" value="3" (change)="onItemChange(3)" name="isShipmentMethod" class="custom-control-input">
                                                                    <label class="custom-control-label" for="customRadio3">
                                                                    <div class="shipping-list-item">
                                                                        <h4>Get it by Wed, Feb 19th</h4>
                                                                        <p>$8.99 Shipping</p>
                                                                    </div>
                                                                </label>
                                                                </div>
                                                            </li>
                                                        </ul>
                                                    </div>
                                                </div>
                                            </ng-template>
                                        </ngb-panel>
                                    </ngb-accordion>
                                    <!-- Save Button For Shipping Address -->
                                    <div class="saveprocessed">
                                        <button type="submit">Save & Continue</button>
                                    </div>
                                </form>
                            </ng-template>
                        </ngb-panel>

                        <ngb-panel [disabled]="showPanel2 ? true:null" id="checkoutstep2">
                            <ng-template ngbPanelTitle>
                                <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24" height="24" viewBox="0 0 24 24">
                                    <defs>
                                        <clipPath id="clip-path">
                                            <rect width="24" height="24" fill="none" />
                                        </clipPath>
                                    </defs>
                                    <g id="Icon_Check_Circle_Rounded" data-name="Icon / Check Circle / Rounded"
                                        clip-path="url(#clip-path)">
                                        <rect id="Box" width="24" height="24" fill="none" />
                                        <path id="Path_2034" data-name="Path 2034"
                                            d="M247.2,14.3l-3.6-3.6a.967.967,0,0,1,0-1.4.967.967,0,0,1,1.4,0l2.9,2.9,6.9-6.9a.99.99,0,0,1,1.4,1.4l-7.6,7.6A.967.967,0,0,1,247.2,14.3ZM249.9,0a10,10,0,1,0,10,10A10.029,10.029,0,0,0,249.9,0Z"
                                            transform="translate(-238 2)" fill="#1cc584" />
                                    </g>
                                </svg>
                                <span>2 of 3 - Payment</span>
                            </ng-template>
                            <ng-template ngbPanelContent>
                                <form [formGroup]="onPaymentSubmitForm" (ngSubmit)="onPaymentSubmit()">
                                    <ngb-accordion activeIds="promo-code,loyalty-info,cards-selection,card-info,billing-method">
                                        <ngb-panel id="promo-code">
                                            <ng-template ngbPanelTitle>
                                                <div class="heading-step1">
                                                    <h4>Promo Code</h4>
                                                    <span class="arrow-stepp">
                                                    <svg xmlns="http://www.w3.org/2000/svg" width="6.6" height="11.2"
                                                        viewBox="0 0 6.6 11.2">
                                                        <path id="Path_2044" data-name="Path 2044"
                                                            d="M630.9,4.7a.967.967,0,0,0,0,1.4l3.9,3.9-3.9,3.9a.99.99,0,0,0,1.4,1.4l4.6-4.6a.967.967,0,0,0,0-1.4l-4.6-4.6A.967.967,0,0,0,630.9,4.7Z"
                                                            transform="translate(-630.6 -4.4)" />
                                                    </svg>
                                                </span>
                                                </div>
                                            </ng-template>
                                            <ng-template ngbPanelContent>
                                                <div class="content-card steps-inner shipping-address-form">
                                                    <div class="col-md-12 loyalty-form p-0 mb-3">
                                                        <div [className]="promocode_onetime ?  'special-field datafilled form-group ' : 'special-field dataempty form-group'">
                                                            <input type="text" [(ngModel)]="promocode_onetime" class="form-control" name="promo-enter" (focusout)="clearPromo($event)" [ngModelOptions]="{standalone: true}"/>
                                                            <label class="form-label">Promo Code</label>
                                                            <span class="vali-promo">{{promocodeMessage}}</span>
                                                            <span class="btn-add-promo" (click)="addPromo()" *ngIf="addPromoIcon" >
                    
                                                            <svg xmlns="http://www.w3.org/2000/svg" width="14"
                                                                height="14" viewBox="0 0 14 14">
                                                                <path _ngcontent-shj-c146="" id="Path_2014"
                                                                    data-name="Path 2014"
                                                                    d="M207.9,11h-5v5a1,1,0,0,1-2,0V11h-5a1,1,0,0,1,0-2h5V4a1,1,0,0,1,2,0V9h5a1,1,0,0,1,0,2Z"
                                                                    transform="translate(-194.9 -3)"></path>
                                                            </svg>
                                                        </span>
                                                        <span class="btn-add-promo" *ngIf="!addPromoIcon">
                    
                                                            <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24" height="24" viewBox="0 0 24 24">
                                                                <defs>
                                                                <clipPath id="clip-path">
                                                                <rect width="24" height="24" fill="none"/>
                                                                </clipPath>
                                                                </defs>
                                                                <g id="Icon_Done_Rounded" data-name="Icon / Done / Rounded" opacity="0.5" clip-path="url(#clip-path)">
                                                                <rect id="Box" width="24" height="24" fill="none"/>
                                                                <path id="Path_2036" data-name="Path 2036" d="M822.7,13.9l-3.5-3.5a.967.967,0,0,0-1.4,0,.967.967,0,0,0,0,1.4L822,16a.967.967,0,0,0,1.4,0L834,5.4A.967.967,0,0,0,834,4a.967.967,0,0,0-1.4,0Z" transform="translate(-814 2)"/>
                                                                </g>
                                                                </svg>
                                                        </span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </ng-template>
                                        </ngb-panel>
                                        <ngb-panel id="loyalty-info">
                                            <ng-template ngbPanelTitle>
                                                <div class="heading-step1">
                                                    <h4>Loyalty Rewards</h4>
                                                    <span class="arrow-stepp">
                                                    <svg xmlns="http://www.w3.org/2000/svg" width="6.6" height="11.2"
                                                        viewBox="0 0 6.6 11.2">
                                                        <path id="Path_2044" data-name="Path 2044"
                                                            d="M630.9,4.7a.967.967,0,0,0,0,1.4l3.9,3.9-3.9,3.9a.99.99,0,0,0,1.4,1.4l4.6-4.6a.967.967,0,0,0,0-1.4l-4.6-4.6A.967.967,0,0,0,630.9,4.7Z"
                                                            transform="translate(-630.6 -4.4)" />
                                                    </svg>
                                                </span>
                                                </div>
                                            </ng-template>
                                            <ng-template ngbPanelContent>
                                                <div class="content-card steps-inner shipping-address-form">
                                                    <div class="loyalty-desc">
                                                        <div class="r-available">Rewards Available:<span class="value-r-available">$25</span></div>
                                                        <div class="r-applied">Rewards Applied:<span class="value-r-applied">$0</span></div>
                                                        <div class="loya-conver">
                                                            <span class="loyal-conv-modal" (click)="open(loyal_conversion)">
                                                            <svg xmlns="http://www.w3.org/2000/svg" width="24"
                                                                height="25" viewBox="0 0 24 25">
                                                                <g id="Group_183" data-name="Group 183"
                                                                    transform="translate(-830 -877)">
                                                                    <g id="Ellipse_13" data-name="Ellipse 13"
                                                                        transform="translate(830 878)" fill="none"
                                                                        stroke="#1cb1c5" stroke-width="2">
                                                                        <circle cx="12" cy="12" r="12" stroke="none" />
                                                                        <circle cx="12" cy="12" r="11" fill="none" />
                                                                    </g>
                                                                    <text id="_" data-name="?"
                                                                        transform="translate(837 897)" fill="#1cb1c5"
                                                                        font-size="18.6"
                                                                        font-family="SegoeUI, Segoe UI">
                                                                        <tspan x="0" y="0">?</tspan>
                                                                    </text>
                                                                </g>
                                                            </svg>
                                                        </span>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-12 loyalty-form p-0 mb-3">
                                                        <div [className]="loyalPointz ?  'special-field datafilled form-group ' : 'special-field dataempty form-group'">
                                                            <input type="text" [(ngModel)]="loyalPointz"  value=""  class="form-control" [ngModelOptions]="{standalone: true}" />
                                                            <label class="form-label">Loyalty points</label>
                                                            <span class="vali-promo">Points Not Applied</span>
                                                            <span class="btn-add-promo">
                                                            <svg xmlns="http://www.w3.org/2000/svg" width="14"
                                                                height="14" viewBox="0 0 14 14">
                                                                <path _ngcontent-shj-c146="" id="Path_2014"
                                                                    data-name="Path 2014"
                                                                    d="M207.9,11h-5v5a1,1,0,0,1-2,0V11h-5a1,1,0,0,1,0-2h5V4a1,1,0,0,1,2,0V9h5a1,1,0,0,1,0,2Z"
                                                                    transform="translate(-194.9 -3)"></path>
                                                            </svg>
                                                        </span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </ng-template>
                                        </ngb-panel>

                                        <ngb-panel id="cards-selection">
                                            <ng-template ngbPanelTitle>
                                                <div class="heading-step1">
                                                    <h4>Select Card</h4>
                                                    <span class="arrow-stepp">
                                                    <svg xmlns="http://www.w3.org/2000/svg" width="6.6" height="11.2"
                                                        viewBox="0 0 6.6 11.2">
                                                        <path id="Path_2044" data-name="Path 2044"
                                                            d="M630.9,4.7a.967.967,0,0,0,0,1.4l3.9,3.9-3.9,3.9a.99.99,0,0,0,1.4,1.4l4.6-4.6a.967.967,0,0,0,0-1.4l-4.6-4.6A.967.967,0,0,0,630.9,4.7Z"
                                                            transform="translate(-630.6 -4.4)" />
                                                    </svg>
                                                </span>
                                                </div>
                                            </ng-template>
                                            <ng-template ngbPanelContent>
                                                <div class="content-card steps-inner shipping-method">
                                                    <div class="method-cardselect">
                                                        <ul class="select-paycard">
                                                            <li>
                                                                <div class="custom-control custom-radio">
                                                                    <input type="radio" id="cardlitem1" name="isSelectCard" value="IsVisaExpire" [ngModel]="isSelectCard" [selected]="true" (change)="onSelectCardChange(1)" class="custom-control-input">
                                                                    <label class="custom-control-label" for="cardlitem1">
                                                                    <div class="shipping-list-item">
                                                                        <h4>Visa ending in 111 <a href=""
                                                                                class="edit-cardopt">Edit</a></h4>
                                                                        <div class="card-info">
                                                                            <p class="name_oncard">john Doe</p>
                                                                            <p class="card-expire">Expires 02/22</p>
                                                                        </div>
                                                                    </div>
                                                                </label>
                                                                </div>
                                                            </li>
                                                            <li>
                                                                <div class="custom-control custom-radio">
                                                                    <input type="radio" id="cardlitem2" name="isSelectCard" value="IsNewCard" [ngModel]="isSelectCard" (change)="onSelectCardChange(2)" class="custom-control-input">
                                                                    <label class="custom-control-label" for="cardlitem2">
                                                                    <div class="shipping-list-item">
                                                                        <h4>Pay with new card</h4>
                                                                    </div>
                                                                </label>
                                                                </div>
                                                            </li>
                                                        </ul>
                                                    </div>
                                                </div>
                                            </ng-template>
                                        </ngb-panel>
                                        <ngb-panel id="card-info"  *ngIf="isCardDisabled">
                                            <ng-template ngbPanelTitle>
                                                <div class="heading-step1" *ngIf="isCardDisabled">
                                                    <h4>Card</h4>
                                                    <span class="arrow-stepp">
                                                    <svg xmlns="http://www.w3.org/2000/svg" width="6.6" height="11.2"
                                                        viewBox="0 0 6.6 11.2">
                                                        <path id="Path_2044" data-name="Path 2044"
                                                            d="M630.9,4.7a.967.967,0,0,0,0,1.4l3.9,3.9-3.9,3.9a.99.99,0,0,0,1.4,1.4l4.6-4.6a.967.967,0,0,0,0-1.4l-4.6-4.6A.967.967,0,0,0,630.9,4.7Z"
                                                            transform="translate(-630.6 -4.4)" />
                                                    </svg>
                                                </span>
                                                </div>
                                            </ng-template>
                                            <ng-template ngbPanelContent>
                                                <div class="content-card steps-inner shipping-address-form">
                                                    <ul class="card-mat">
                                                        <li><img src="../../assets/card-ui-1.png" /></li>
                                                        <li><img src="../../assets/card-ui-2.png" /></li>
                                                        <li><img src="../../assets/card-ui-3.png" /></li>
                                                        <li><img src="../../assets/card-ui-4.png" /></li>
                                                        <li><span class="more-card">and more</span></li>
                                                    </ul>
                                                    <div class="card-infoo">
                                                        <div class="row">
                                                            <div class="col-md-12">
                                                                <div class="form-group">
                                                                    <input type="text" formControlName="cardName" placeholder="Name on card" name="card-name" class="form-control" [ngClass]="{ 'is-invalid': paymentSubmitted && p.cardName?.errors }" />
                                                                    <div *ngIf="paymentSubmitted && p.cardName?.errors" class="invalid-feedback">
                                                                        <div *ngIf="p.cardName?.errors.required">Card Name is required</div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="col-md-12">
                                                                <div class="form-group">
                                                                    <input type="number" formControlName="cardNumber"   minlength="14" maxlength="15"  (change)="creditCardValidator($event)" placeholder="Card number" name="cardNumber" class="form-control" [ngClass]="{ 'is-invalid': paymentSubmitted && p.cardNumber?.errors }" />
                                                                    <div *ngIf="paymentSubmitted && p.cardNumber?.errors" class="invalid-feedback">
                                                                        <div *ngIf="p.cardNumber?.errors.required">Card Number is required</div>
                                                                        <div *ngIf="p.cardNumber.errors.minlength">Card Number must be at least 14 numbers </div>
                                                                    </div>
                                                                    <div *ngIf="cardvalidate" class="cardvalidateerror">
                                                                        <div *ngIf="cardvalidate">Card Number is not valid</div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="row">
                                                            <div class="col-6 col-md-3">
                                                                <div class="form-group">
                                                                    
                                                                    <input type="number" formControlName="expiryMonth" placeholder="Month" name="expiryMonth" class="form-control" [ngClass]="{ 'is-invalid': paymentSubmitted && p.expiryMonth?.errors }" />
                                                                    <div *ngIf="paymentSubmitted && p.expiryMonth?.errors" class="invalid-feedback">
                                                                        <div *ngIf="p.expiryMonth?.errors.required">Expiry Month is required</div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="col-6 col-md-3">
                                                                <div class="form-group">
                                                                    <input type="number" formControlName="expiryYear" placeholder="Year" name="expiryYear" class="form-control" [ngClass]="{ 'is-invalid': paymentSubmitted && p.expiryYear?.errors }" />
                                                                    <div *ngIf="paymentSubmitted && p.expiryYear?.errors" class="invalid-feedback">
                                                                        <div *ngIf="p.expiryYear?.errors.required">Expiry Year is required</div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="col-md-3">
                                                                <div class="form-group">
                                                                    <input type="number" formControlName="cardCVV" placeholder="CVV" name="cardCVV" class="form-control" [ngClass]="{ 'is-invalid': paymentSubmitted && p.cardCVV?.errors }" />
                                                                    <div *ngIf="paymentSubmitted && p.cardCVV?.errors" class="invalid-feedback">
                                                                        <div *ngIf="p.cardCVV?.errors.required">card CVV is required</div>
                                                                    </div>
                                                                </div>
                                                            </div>

                                                        </div>
                                                        <div class="row">
                                                            <div class="col-md-12">
                                                                <ul class="conv-products mk-primary">
                                                                    <li>
                                                                        <div class="custom-control custom-radio">
                                                                            <input type="checkbox" id="card-primary" formArrayName="isMakePrimaryCard" formControlName="isMakePrimaryCard" (change)="onCheckboxChange($event)" value="0" name="isMakePrimaryCard" class="custom-control-input">
                                                                            <label class="custom-control-label" for="card-primary">
                                                                                Make primary card
                                                                            </label>
                                                                        </div>
                                                                    </li>
                                                                </ul>
                                                            </div>
                                                        </div>
                                                    </div>

                                                </div>
                                            </ng-template>
                                        </ngb-panel>
                                        <ngb-panel id="billing-method">
                                            <ng-template ngbPanelTitle>
                                                <div class="heading-step1">
                                                    <h4>Billing Address</h4>
                                                    <span class="arrow-stepp">
                                                    <svg xmlns="http://www.w3.org/2000/svg" width="6.6" height="11.2"
                                                        viewBox="0 0 6.6 11.2">
                                                        <path id="Path_2044" data-name="Path 2044"
                                                            d="M630.9,4.7a.967.967,0,0,0,0,1.4l3.9,3.9-3.9,3.9a.99.99,0,0,0,1.4,1.4l4.6-4.6a.967.967,0,0,0,0-1.4l-4.6-4.6A.967.967,0,0,0,630.9,4.7Z"
                                                            transform="translate(-630.6 -4.4)" />
                                                    </svg>
                                                </span>
                                                </div>
                                            </ng-template>
                                            <ng-template ngbPanelContent>
                                                <div class="content-card steps-inner shipping-method">
                                                    <div class="method-shipp">
                                                        <ul>
                                                            <li>
                                                                <div class="custom-control custom-radio">
                                                                    <input type="radio" id="customRadio4" (change)="shippingAddressType('shippingAddress')" name="newCustomRadio" class="custom-control-input">
                                                                    <label class="custom-control-label" for="customRadio4">
                                                                    <div class="shipping-list-item">
                                                                        <h4>Same as shipping address</h4>
                                                                    </div>
                                                                </label>
                                                                </div>
                                                            </li>
                                                            <li>
                                                                <div class="custom-control custom-radio">
                                                                    <input type="radio" id="customRadio5" (change)="shippingAddressType('newAddress')" type="radio" name="newCustomRadio" class="custom-control-input">
                                                                    <label class="custom-control-label" for="customRadio5">
                                                                    <div class="shipping-list-item">
                                                                        <h4>Use different billing address</h4>
                                                                    </div>
                                                                </label>
                                                                </div>
                                                            </li>
                                                        </ul>
                                                    </div>
                                                    <ng-template [ngIf]="addrnew">
                                                        <div class="different-address">
                                                            <div class="newaddr-infoo">
                                                                <div class="row">
                                                                    <div class="col-md-12">
                                                                        <div class="form-group">
                                                                            <input type="text" formControlName="newStreetAddress" placeholder="Street address" name="newStreetAddress" class="form-control" />
                                                                        </div>
                                                                    </div>
                                                                    <div class="col-md-4">
                                                                        <div class="form-group">
                                                                            <input type="text" formControlName="newCity" placeholder="City" name="newCity" class="form-control" />
                                                                        </div>
                                                                    </div>

                                                                    <div class="col-6 col-md-4">
                                                                        <div class="form-group">
                                                                            <input type="text" placeholder="State" name="newState" formControlName="newState" class="form-control" />
                                                                        </div>
                                                                    </div>
                                                                    <div class="col-6 col-md-4">
                                                                        <div class="form-group">
                                                                            <input type="number" placeholder="ZIP" name="newZip" formControlName="newZip" class="form-control" />
                                                                        </div>
                                                                    </div>
                                                                    <div class="col-md-6">
                                                                        <div class="form-group">
                                                                            <input type="text" formControlName="newCountry" placeholder="Country" name="newCountry" class="form-control" />
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </ng-template>
                                                </div>
                                            </ng-template>
                                        </ngb-panel>
                                    </ngb-accordion>
                                    <div class="saveprocessed">
                                        <button type="submit">Save & Continue</button>
                                    </div>
                                </form>
                            </ng-template>
                        </ngb-panel>

                        <ngb-panel id="checkoutstep3" [disabled]="showPanel3 ? true:null">
                            <ng-template ngbPanelTitle>
                                <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24" height="24" viewBox="0 0 24 24">
                                    <defs>
                                        <clipPath id="clip-path">
                                            <rect width="24" height="24" fill="none" />
                                        </clipPath>
                                    </defs>
                                    <g id="Icon_Check_Circle_Rounded" data-name="Icon / Check Circle / Rounded"
                                        clip-path="url(#clip-path)">
                                        <rect id="Box" width="24" height="24" fill="none" />
                                        <path id="Path_2034" data-name="Path 2034"
                                            d="M247.2,14.3l-3.6-3.6a.967.967,0,0,1,0-1.4.967.967,0,0,1,1.4,0l2.9,2.9,6.9-6.9a.99.99,0,0,1,1.4,1.4l-7.6,7.6A.967.967,0,0,1,247.2,14.3ZM249.9,0a10,10,0,1,0,10,10A10.029,10.029,0,0,0,249.9,0Z"
                                            transform="translate(-238 2)" fill="#1cc584" />
                                    </g>
                                </svg>
                                <span>3 of 3 - Review Order</span>
                            </ng-template>
                            <ng-template ngbPanelContent>
                                <ngb-accordion activeIds="notifi-review,promo-code,loyalty-info,today-order">
                                    <ngb-panel id="notifi-review">
                                        <ng-template ngbPanelTitle>
                                            <div class="heading-step1">
                                                <h4>Does everything look correct?</h4>
                                                <p>Select <a href="">Place My Order</a> to continue</p>
                                            </div>
                                        </ng-template>
                                    </ngb-panel>

                                    <ngb-panel id="promo-code">
                                        <ng-template ngbPanelTitle>
                                            <div class="heading-step1">
                                                <h4>Have a promo code?</h4>
                                                <p>{{promocodeMessage}}</p>
                                                <span class="arrow-stepp">
                                                <svg xmlns="http://www.w3.org/2000/svg" width="6.6" height="11.2"
                                                    viewBox="0 0 6.6 11.2">
                                                    <path id="Path_2044" data-name="Path 2044"
                                                        d="M630.9,4.7a.967.967,0,0,0,0,1.4l3.9,3.9-3.9,3.9a.99.99,0,0,0,1.4,1.4l4.6-4.6a.967.967,0,0,0,0-1.4l-4.6-4.6A.967.967,0,0,0,630.9,4.7Z"
                                                        transform="translate(-630.6 -4.4)" />
                                                </svg>
                                            </span>
                                            </div>
                                        </ng-template>
                                        <ng-template ngbPanelContent>
                                            <div class="content-card steps-inner shipping-address-form">
                                                <div class="col-md-12 loyalty-form p-0 mb-3">
                                                    <div [className]="promocode_onetime ?  'special-field datafilled form-group ' : 'special-field dataempty form-group'">
                                                        <input type="text" [(ngModel)]="promocode_onetime" class="form-control" name="promo-enter" (focusout)="clearPromo($event)" [ngModelOptions]="{standalone: true}"/>
                                                        <label class="form-label">Promo Code</label>
                                                        <span class="vali-promo" >{{promocodeMessage}}</span>
                                                        <span class="btn-add-promo" (click)="addPromo()" *ngIf="addPromoIcon" >
                    
                                                            <svg xmlns="http://www.w3.org/2000/svg" width="14"
                                                                height="14" viewBox="0 0 14 14">
                                                                <path _ngcontent-shj-c146="" id="Path_2014"
                                                                    data-name="Path 2014"
                                                                    d="M207.9,11h-5v5a1,1,0,0,1-2,0V11h-5a1,1,0,0,1,0-2h5V4a1,1,0,0,1,2,0V9h5a1,1,0,0,1,0,2Z"
                                                                    transform="translate(-194.9 -3)"></path>
                                                            </svg>
                                                        </span>
                                                        <span class="btn-add-promo" *ngIf="!addPromoIcon">
                    
                                                            <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24" height="24" viewBox="0 0 24 24">
                                                                <defs>
                                                                <clipPath id="clip-path">
                                                                <rect width="24" height="24" fill="none"/>
                                                                </clipPath>
                                                                </defs>
                                                                <g id="Icon_Done_Rounded" data-name="Icon / Done / Rounded" opacity="0.5" clip-path="url(#clip-path)">
                                                                <rect id="Box" width="24" height="24" fill="none"/>
                                                                <path id="Path_2036" data-name="Path 2036" d="M822.7,13.9l-3.5-3.5a.967.967,0,0,0-1.4,0,.967.967,0,0,0,0,1.4L822,16a.967.967,0,0,0,1.4,0L834,5.4A.967.967,0,0,0,834,4a.967.967,0,0,0-1.4,0Z" transform="translate(-814 2)"/>
                                                                </g>
                                                                </svg>
                                                        </span>
                                                    </div>
                                                </div>
                                            </div>
                                        </ng-template>
                                    </ngb-panel>
                               
                                    <!-- <ngb-panel id="loyalty-info">
                                        <ng-template ngbPanelTitle>
                                            <div class="heading-step1">
                                                <h4>Loyalty points</h4>
                                                <p>No points applied</p>
                                                <span class="arrow-stepp">
                                                    <svg xmlns="http://www.w3.org/2000/svg" width="6.6" height="11.2"
                                                        viewBox="0 0 6.6 11.2">
                                                        <path id="Path_2044" data-name="Path 2044"
                                                            d="M630.9,4.7a.967.967,0,0,0,0,1.4l3.9,3.9-3.9,3.9a.99.99,0,0,0,1.4,1.4l4.6-4.6a.967.967,0,0,0,0-1.4l-4.6-4.6A.967.967,0,0,0,630.9,4.7Z"
                                                            transform="translate(-630.6 -4.4)" />
                                                    </svg>
                                                </span>
                                            </div>
                                        </ng-template>

                                    </ngb-panel> -->

                                    <ngb-panel id="today-order">
                                        <ng-template ngbPanelTitle>
                                            <div class="heading-step1">
                                                <h4>Today's Order</h4>
                                            </div>
                                        </ng-template>
                                        <ng-template ngbPanelContent>
                                            <div class="content-card steps-inner order-summary">
                                                <div class="table-today-order">
                                                    <table>
                                                        <tbody>
                                                            <tr>
                                                                <td>Order Total</td>
                                                                <td>${{orderTotal | number:'.1-2'}}</td>
                                                            </tr>
                                                            <tr>
                                                                <td>Subtotal</td>
                                                                <td>${{cartSummaryTotal | number:'.1-2'}}</td>
                                                            </tr>
                                                            <tr>
                                                                <td>Shipping</td>
                                                                <td>$6.96</td>
                                                            </tr>
                                                            <tr>
                                                                <td>Tax</td>
                                                                <td>$3.42</td>
                                                            </tr>
                                                        </tbody>
                                                        <tfoot>
                                                            <tr>
                                                                <td>
                                                                    <p class="you-sav">You Saved</p>
                                                                </td>
                                                                <td>
                                                                    <p class="you-sav">-${{totalDiscount | number:'.1-2'}}
                                                                    </p>
                                                                </td>
                                                            </tr>
                                                            <tr>
                                                                <td>
                                                                    <p class="you-pay">You pay</p>
                                                                </td>
                                                                <td>
                                                                    <p class="you-pay">${{cartSummaryTotal | number:'.1-2'}}
                                                                    </p>
                                                                </td>
                                                            </tr>
                                                        </tfoot>
                                                    </table>
                                                </div>
                                            </div>
                                        </ng-template>
                                    </ngb-panel>
                                </ngb-accordion>
                                <div class="final-cta-bottom">
                                    <div class="plce-order-cta">
                                        <button type="submit" (click)="onSubmit()">Place My Order</button>
                                    </div>
                                    <div class="verified-batch">
                                        <span class="batch-icon"><svg xmlns="http://www.w3.org/2000/svg" width="27"
                                                height="36.001" viewBox="0 0 27 36.001">
                                                <path _ngcontent-shi-c146="" id="Icon_awesome-award"
                                                    data-name="Icon awesome-award"
                                                    d="M6.829,25.5c-.611-.611-.293-.439-1.766-.833a5.073,5.073,0,0,1-1.788-.937L.084,31.549A1.125,1.125,0,0,0,1.169,33.1l3.7-.141,2.548,2.692A1.125,1.125,0,0,0,9.281,35.3l3.66-8.973A5.046,5.046,0,0,1,6.829,25.5Zm20.087,6.052-3.19-7.822a5.062,5.062,0,0,1-1.788.937c-1.481.4-1.157.224-1.766.833a5.047,5.047,0,0,1-6.112.829l3.66,8.973a1.125,1.125,0,0,0,1.858.349l2.549-2.692,3.7.141a1.125,1.125,0,0,0,1.085-1.549Zm-8.423-7.643c1.074-1.093,1.2-1,2.727-1.416a2.857,2.857,0,0,0,2-2.038c.526-2,.39-1.756,1.825-3.217a2.917,2.917,0,0,0,.733-2.783c-.525-2-.526-1.717,0-3.715a2.917,2.917,0,0,0-.733-2.783c-1.435-1.461-1.3-1.221-1.825-3.217a2.857,2.857,0,0,0-2-2.038c-1.96-.535-1.724-.4-3.161-1.857A2.8,2.8,0,0,0,15.325.1c-1.96.534-1.686.535-3.649,0A2.8,2.8,0,0,0,8.941.844C7.506,2.3,7.742,2.166,5.781,2.7a2.857,2.857,0,0,0-2,2.038c-.525,2-.39,1.756-1.825,3.217a2.915,2.915,0,0,0-.733,2.783c.525,1.994.526,1.716,0,3.714a2.919,2.919,0,0,0,.733,2.784c1.435,1.461,1.3,1.22,1.825,3.217a2.857,2.857,0,0,0,2,2.038c1.574.429,1.691.361,2.727,1.416a2.794,2.794,0,0,0,3.5.409,2.79,2.79,0,0,1,2.99,0A2.793,2.793,0,0,0,18.492,23.906ZM6.867,12.372A6.634,6.634,0,1,1,13.5,19.124a6.693,6.693,0,0,1-6.633-6.751Z"
                                                    transform="translate(0 0.001)" fill="#333" opacity="0.5"></path>
                                            </svg></span>
                                        <span class="batch-text">Every order is backed by our 100% Happy
                                            Guarantee</span>
                                    </div>
                                </div>
                            </ng-template>
                        </ngb-panel>
                    </ngb-accordion>

                </div>
            </div>

        </div>
    </div>
</section>


<ng-template #loyal_conversion let-modal>
    <div [ngClass]="{'loyal_conversion_modal': true}">
        <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
            <span aria-hidden="true">&times;</span>
        </button>
        <div class="modal-body">
            <div class="modal-content-conversion">
                <div class="desc-loyalty">
                    <p>Loyalty Points are earned through the Loyalty Rewards Program. When subscriptions totaling $50+ are shipped monthly, up to 20% of the order value can be earned back in Loyalty Points! Points have a dollar for dollar value, and can
                        be used on one-time purchases of any standard products.
                    </p>
                    <p>Start earning rewards by creating your subscription today!</p>
                </div>
                <div class="link_conversion">
                    <a href="">Convert Subscription</a>
                </div>
            </div>
        </div>
    </div>
</ng-template>

<ng-template #referr_user let-modal>
    <div [ngClass]="{'referrer_modal': true}">
        <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
            <span aria-hidden="true">&times;</span>
        </button>
        <div class="modal-body">
            <h3 class="referrer-title" id="modal-basic-title">Who referred you?</h3>
            <div class="search-bar-on">
                <div class="form-group">
                    <input type="text" #myInput class="form-control" value="" [(ngModel)]="filterTerm" (input)="filterItem(myInput.value)" placeholder="Find referral (Optional)" />
                    <span class="search">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16.947" height="17.048"
                            viewBox="0 0 16.947 17.048">
                            <path id="Path_2019" data-name="Path 2019"
                                d="M151.4,12a4.5,4.5,0,1,1,4.5-4.5A4.481,4.481,0,0,1,151.4,12Zm6,0h-.8l-.3-.3a6.593,6.593,0,0,0,1.5-5.3,6.471,6.471,0,0,0-5.6-5.3,6.53,6.53,0,0,0-2,12.9,6.593,6.593,0,0,0,5.3-1.5l.3.3v.8l4.2,4.2a1.061,1.061,0,0,0,1.5-1.5Z"
                                transform="translate(-144.853 -1.052)" />
                        </svg>
                    </span>
                </div>
                <span class="text-value">Customer ID, First or Last Name</span>
            </div>
            <div class="search-results">
                <h4>Search Results</h4>
                <div class="referred-lists">
                    <!--- Referrer People Grid --->
                    <div class="data-all-referrer" *ngIf="isDataAvailable">
                        <div class="reffered-list-items" *ngFor="let referrer of selectedData">
                            <div class="media">
                                <div class="media-left">
                                    <a href="#">
                                        <img class="media-object" src="{{referrer.referrer_image}}" alt="...">
                                    </a>
                                </div>
                                <div class="media-body">
                                    <div class="data-cart">
                                        <div class="cart-details">
                                            <h4 class="media-heading">{{referrer.referrer_name}}, ID #{{referrer.id}}
                                            </h4>
                                            <div class="refrrer-info">
                                                <p class="wink-link">Wink Link:<span class="wlink-data">{{referrer.wink_link}}</span></p>
                                                <p class="location-referrer">{{referrer.referrer_location}}</p>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="link-select">
                                        <a (click)="choose_referrer(referrer)">Select</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!--- Referrer People Grid --->
                    <div *ngIf="!isDataAvailable"> No Records Available</div>
                </div>
            </div>
        </div>
    </div>
</ng-template>